<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta content="yes" name="apple-mobile-web-app-capable" />
	<meta name="viewport"
		content="width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0,user-scalable=no" />
	<title>Document</title>
	<link rel="stylesheet" href="index.css">
</head>

<body>
	<div class="main-wrap">
		<div class="tab-wrap">
			<div class="tab-item current-tab">公共订单池</div>
			<div class="tab-item">已出票</div>
			<div class="tab-item">竞价中订单</div>
		</div>
		<div class="card-list" id="card-list">
			<div class="card-wrap">
				订单出价: <span class="price-text" onclick="showInputModal(0)">选择出价</span>
			</div>
			<div class="card-wrap">
				订单出价: <span class="price-text" onclick="showInputModal(1)">选择出价</span>
			</div>
			<div class="card-wrap">
				订单出价: <span class="price-text" onclick="showInputModal(2)">选择出价</span>
			</div>
			<div class="card-wrap">
				订单出价: <span class="price-text" onclick="showInputModal(3)">选择出价</span>
			</div>
			<div class="card-wrap">
				订单出价: <span class="price-text" onclick="showInputModal(4)">选择出价</span>
			</div>
		</div>
		<div id="footer-wrap" class="footer-wrap">
			<img class="footer-bg" src="./icons/footer.png" alt="">
		</div>
		<div id="input-component" class="modal-wrap hide" onclick="handleClickMock()">
			<div class="input-modal-wrap">
				<div class="input-title-wrap">
					<div>建议出价: 30 - 50</div>
					<div class="confirm-btn" onclick="confirmPrice()">确定</div>
				</div>
				<div class="input-body-wrap">
					<input id="input-price" class="input-body" type="number" onfocus="handleInputFocus()"
						onblur="handleInputBlur()">
					<div class="input-float-title">请填写您的出价(￥)</div>
				</div>
			</div>
		</div>
	</div>
</body>
<script>
	let currentInputIndex = null
	const cardListDom = document.getElementById("card-list").children
	const inputPriceDom = document.getElementById("input-price")
	const inputComponentDom = document.getElementById("input-component")
	const footerDom = document.getElementById("footer-wrap")

	function handleClickMock() {
		const e = window.event || arguments.callee.caller.arguments[0]
		if (e.target.id !== 'input-component') return
		hideInputModal()
	}
	function confirmPrice() {
		const inputText = cardListDom[currentInputIndex].children[0]
		if (inputPriceDom.value) {
			inputText.innerHTML = inputPriceDom.value
			hideInputModal()
		} else {
			alert('请输入价格')
		}
	}
	function showInputModal(index) {
		currentInputIndex = index
		showDom(inputComponentDom)
	}
	function handleInputFocus() {
		hideDom(footerDom)
	}
	function handleInputBlur() {
		showDom(footerDom)
	}

	function hideInputModal() {
		inputPriceDom.value = null
		hideDom(inputComponentDom)
	}
	function hideDom(dom) {
		dom.className += ' hide'
	}
	function showDom(dom) {
		const oldClass = dom.getAttribute("class")
		const newClass = oldClass.replace("hide", "")
		dom.setAttribute("class", newClass)
	}
</script>

</html>